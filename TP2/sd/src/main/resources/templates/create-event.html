<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="layout">

<head>
    <script type="text/javascript">
        function dropdown_options() {
            var dropdown = document.getElementById("option_list");
            var option = dropdown.options[dropdown.selectedIndex].value;

            
            
        }

        function get_game_id(){
            return document.getElementById("game_id").value;
        }

        function update_teams(){
            value = document.getElementById("game_id").value;
            var teams_list = document.getElementById("game"), idk, i;
            //console.debug(teams_list.options);
            
            for (let i = 0; i < teams_list.length; i++){
                team = teams_list[i];
                if (team.value === value){
                    team.removeAttribute("hidden");
                }else{
                    team.setAttribute("hidden", "hidden");
                }
            }
            
        }
    </script>

    <div layout:fragment="header">
        <title>Create event</title>
    </div>
</head>

<body>
    <div layout:fragment="content">

        <div th:if="${param.error}" class="alert alert-danger" role="alert">
            Erro a criar evento!
        </div>

        <form th:action="@{/event/create}" th:object="${event}" method="post">
            <div>
                <select class="form-select form-select-lg mb-2" th:field="*{game}" id="game_id" onchange="update_teams()">
                    <option value="">Select Game</option>
                    <option th:each="option : ${games}" th:value="${option.id}"
                        th:text="${option.teamA.name} + ' vs ' + ${option.teamB.name}"></option>
                </select>
            </div>
            <div>
                <select class="form-select form-select-lg mb-2" th:field="*{name}" id="option_list">
                    <option value="">Select Event</option>
                    <option th:each="option : ${events}" th:value="${option}" th:text="${option}"></option>
                </select>
            </div>

            <div>
                <select class="form-select form-select-lg mb-2" style="visibility: visible" id="game">
                    <option value="">Select Team</option>
                    <option th:each="option: ${games}" th:value="${option.id}" th:text="${option.teamA.name}" hidden></option>
                    <option th:each="option: ${games}" th:value="${option.id}" th:text="${option.teamB.name}" hidden></option>
                </select>
            </div>

            <div>
                <select class="form-select form-select-lg mb-2" th:field="*{game}" id="player_option">
                    <option value="">Select Player</option>
                    <!--<option th:each="option: ${games}" th:value="${option.teamA.id}" th:text="${option.teamA.pl}" hidden></option>-->
                </select>
            </div>

            <div>
                <button type="submit" class="btn btn-outline-primary"
                    style="padding-left: 2.5rem; padding-right: 2.5rem;">Criar evento</button>
            </div>
        </form>

    </div>

</body>

</html>